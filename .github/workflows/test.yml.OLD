name: Build with CMake

on:
  push:
    branches:
      - master
      - dreibh/github-actions

jobs:
  run-on-arch-buster-aarch64:
    runs-on: ubuntu-latest
    name: Debian Buster on ARMv8
    steps:
      - uses: actions/checkout@v2
      - uses: uraimo/run-on-arch-action@v2.1.1
        name: Run commands
        id: build
        with:
          arch: aarch64
          distro: buster
          shell: /bin/bash
          install: |
            uname -a
            apt-get update -q
            apt-get install -y gcc python3
          run: |
            uname -a

  run-on-arch-buster-amd64:
    runs-on: ubuntu-latest
    name: Debian Buster on AMD64
    steps:
      - uses: actions/checkout@v2
      - uses: dreibh/run-on-arch-action@dreibh/tests
        name: Run commands
        id: build
        with:
          arch: amd64
          distro: buster
          shell: /bin/bash
          install: |
            uname -a
            apt-get update -q
            apt-get install -y gcc python3
          run: |
            uname -a
